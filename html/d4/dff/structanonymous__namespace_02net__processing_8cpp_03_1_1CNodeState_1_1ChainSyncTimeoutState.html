<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.15"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Bitcoin: anonymous_namespace{net_processing.cpp}::CNodeState::ChainSyncTimeoutState Struct Reference</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/searchdata.js"></script>
<script type="text/javascript" src="../../search/search.js"></script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Bitcoin
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.15 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "../../search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="../../menudata.js"></script>
<script type="text/javascript" src="../../menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('../../',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="../../df/de8/namespaceanonymous__namespace_02net__processing_8cpp_03.html">anonymous_namespace{net_processing.cpp}</a></li><li class="navelem"><a class="el" href="../../da/d0e/structanonymous__namespace_02net__processing_8cpp_03_1_1CNodeState.html">CNodeState</a></li><li class="navelem"><a class="el" href="../../d4/dff/structanonymous__namespace_02net__processing_8cpp_03_1_1CNodeState_1_1ChainSyncTimeoutState.html">ChainSyncTimeoutState</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-attribs">Public Attributes</a> &#124;
<a href="../../da/d60/structanonymous__namespace_02net__processing_8cpp_03_1_1CNodeState_1_1ChainSyncTimeoutState-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">anonymous_namespace{net_processing.cpp}::CNodeState::ChainSyncTimeoutState Struct Reference</div>  </div>
</div><!--header-->
<div class="contents">
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-attribs"></a>
Public Attributes</h2></td></tr>
<tr class="memitem:a66e85f4d944beae0001a2cc5dff18bcb"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../df/dd8/stdint_8h.html#adec1df1b8b51cb32b77e5b86fff46471">int64_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d4/dff/structanonymous__namespace_02net__processing_8cpp_03_1_1CNodeState_1_1ChainSyncTimeoutState.html#a66e85f4d944beae0001a2cc5dff18bcb">m_timeout</a></td></tr>
<tr class="memdesc:a66e85f4d944beae0001a2cc5dff18bcb"><td class="mdescLeft">&#160;</td><td class="mdescRight">A timeout used for checking whether our peer has sufficiently synced.  <a href="#a66e85f4d944beae0001a2cc5dff18bcb">More...</a><br /></td></tr>
<tr class="separator:a66e85f4d944beae0001a2cc5dff18bcb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aada06fa17c17553ea77779daba55d802"><td class="memItemLeft" align="right" valign="top">const <a class="el" href="../../d8/df0/classCBlockIndex.html">CBlockIndex</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d4/dff/structanonymous__namespace_02net__processing_8cpp_03_1_1CNodeState_1_1ChainSyncTimeoutState.html#aada06fa17c17553ea77779daba55d802">m_work_header</a></td></tr>
<tr class="memdesc:aada06fa17c17553ea77779daba55d802"><td class="mdescLeft">&#160;</td><td class="mdescRight">A header with the work we require on our peer's chain.  <a href="#aada06fa17c17553ea77779daba55d802">More...</a><br /></td></tr>
<tr class="separator:aada06fa17c17553ea77779daba55d802"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aba1a728a51ed57351290f43a097be4fe"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d4/dff/structanonymous__namespace_02net__processing_8cpp_03_1_1CNodeState_1_1ChainSyncTimeoutState.html#aba1a728a51ed57351290f43a097be4fe">m_sent_getheaders</a></td></tr>
<tr class="memdesc:aba1a728a51ed57351290f43a097be4fe"><td class="mdescLeft">&#160;</td><td class="mdescRight">After timeout is reached, set to true after sending getheaders.  <a href="#aba1a728a51ed57351290f43a097be4fe">More...</a><br /></td></tr>
<tr class="separator:aba1a728a51ed57351290f43a097be4fe"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afaa8faff39c9a6454ecc0dc21b5f6139"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d4/dff/structanonymous__namespace_02net__processing_8cpp_03_1_1CNodeState_1_1ChainSyncTimeoutState.html#afaa8faff39c9a6454ecc0dc21b5f6139">m_protect</a></td></tr>
<tr class="memdesc:afaa8faff39c9a6454ecc0dc21b5f6139"><td class="mdescLeft">&#160;</td><td class="mdescRight">Whether this peer is protected from disconnection due to a bad/slow chain.  <a href="#afaa8faff39c9a6454ecc0dc21b5f6139">More...</a><br /></td></tr>
<tr class="separator:afaa8faff39c9a6454ecc0dc21b5f6139"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>State used to enforce CHAIN_SYNC_TIMEOUT Only in effect for outbound, non-manual connections, with m_protect == false Algorithm: if a peer's best known block has less work than our tip, set a timeout CHAIN_SYNC_TIMEOUT seconds in the future:</p><ul>
<li>If at timeout their best known block now has more work than our tip when the timeout was set, then either reset the timeout or clear it (after comparing against our current tip's work)</li>
<li>If at timeout their best known block still has less work than our tip did when the timeout was set, then send a getheaders message, and set a shorter timeout, HEADERS_RESPONSE_TIME seconds in future. If their best known block is still behind when that new timeout is reached, disconnect. </li>
</ul>
</div><h2 class="groupheader">Member Data Documentation</h2>
<a id="afaa8faff39c9a6454ecc0dc21b5f6139"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afaa8faff39c9a6454ecc0dc21b5f6139">&#9670;&nbsp;</a></span>m_protect</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool anonymous_namespace{net_processing.cpp}::CNodeState::ChainSyncTimeoutState::m_protect</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Whether this peer is protected from disconnection due to a bad/slow chain. </p>

</div>
</div>
<a id="aba1a728a51ed57351290f43a097be4fe"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aba1a728a51ed57351290f43a097be4fe">&#9670;&nbsp;</a></span>m_sent_getheaders</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool anonymous_namespace{net_processing.cpp}::CNodeState::ChainSyncTimeoutState::m_sent_getheaders</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>After timeout is reached, set to true after sending getheaders. </p>

</div>
</div>
<a id="a66e85f4d944beae0001a2cc5dff18bcb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a66e85f4d944beae0001a2cc5dff18bcb">&#9670;&nbsp;</a></span>m_timeout</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../df/dd8/stdint_8h.html#adec1df1b8b51cb32b77e5b86fff46471">int64_t</a> anonymous_namespace{net_processing.cpp}::CNodeState::ChainSyncTimeoutState::m_timeout</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>A timeout used for checking whether our peer has sufficiently synced. </p>

</div>
</div>
<a id="aada06fa17c17553ea77779daba55d802"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aada06fa17c17553ea77779daba55d802">&#9670;&nbsp;</a></span>m_work_header</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const <a class="el" href="../../d8/df0/classCBlockIndex.html">CBlockIndex</a>* anonymous_namespace{net_processing.cpp}::CNodeState::ChainSyncTimeoutState::m_work_header</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>A header with the work we require on our peer's chain. </p>

</div>
</div>
<hr/>The documentation for this struct was generated from the following file:<ul>
<li>src/<a class="el" href="../../d2/d83/net__processing_8cpp.html">net_processing.cpp</a></li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="../../doxygen.png" alt="doxygen"/>
</a> 1.8.15
</small></address>
</body>
</html>
