<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.15"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Bitcoin: BerkeleyEnvironment Class Reference</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/searchdata.js"></script>
<script type="text/javascript" src="../../search/search.js"></script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Bitcoin
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.15 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "../../search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="../../menudata.js"></script>
<script type="text/javascript" src="../../menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('../../',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-types">Public Types</a> &#124;
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pub-attribs">Public Attributes</a> &#124;
<a href="#pri-attribs">Private Attributes</a> &#124;
<a href="../../db/dec/classBerkeleyEnvironment-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">BerkeleyEnvironment Class Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p><code>#include &lt;<a class="el" href="../../da/d7e/wallet_2db_8h_source.html">db.h</a>&gt;</code></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-types"></a>
Public Types</h2></td></tr>
<tr class="memitem:a898177d0cb22503c06cf8c40d70d6b56"><td class="memItemLeft" align="right" valign="top">enum &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/d42/classBerkeleyEnvironment.html#a898177d0cb22503c06cf8c40d70d6b56">VerifyResult</a> { <a class="el" href="../../d1/d42/classBerkeleyEnvironment.html#a898177d0cb22503c06cf8c40d70d6b56a472351361a4f0778fe872c265e811907">VerifyResult::VERIFY_OK</a>, 
<a class="el" href="../../d1/d42/classBerkeleyEnvironment.html#a898177d0cb22503c06cf8c40d70d6b56ab4c78330ee9f64bd5c4b30ca8dec8296">VerifyResult::RECOVER_OK</a>, 
<a class="el" href="../../d1/d42/classBerkeleyEnvironment.html#a898177d0cb22503c06cf8c40d70d6b56a11421d83e9f4dea33178d275bcc4f0c0">VerifyResult::RECOVER_FAIL</a>
 }</td></tr>
<tr class="separator:a898177d0cb22503c06cf8c40d70d6b56"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4097b6a84480eaf6c00be5d57789a114"><td class="memItemLeft" align="right" valign="top">typedef bool(*&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/d42/classBerkeleyEnvironment.html#a4097b6a84480eaf6c00be5d57789a114">recoverFunc_type</a>) (const fs::path &amp;file_path, std::string &amp;out_backup_filename)</td></tr>
<tr class="separator:a4097b6a84480eaf6c00be5d57789a114"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a80dc9ae666ddef68869bdbf97cd25000"><td class="memItemLeft" align="right" valign="top">typedef std::pair&lt; std::vector&lt; unsigned char &gt;, std::vector&lt; unsigned char &gt; &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/d42/classBerkeleyEnvironment.html#a80dc9ae666ddef68869bdbf97cd25000">KeyValPair</a></td></tr>
<tr class="separator:a80dc9ae666ddef68869bdbf97cd25000"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a62bf19db5dc92ca7db4c454d44a4dd2c"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/d42/classBerkeleyEnvironment.html#a62bf19db5dc92ca7db4c454d44a4dd2c">BerkeleyEnvironment</a> (const fs::path &amp;env_directory)</td></tr>
<tr class="separator:a62bf19db5dc92ca7db4c454d44a4dd2c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aec772ec512f6642d76cc9c6e56959704"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/d42/classBerkeleyEnvironment.html#aec772ec512f6642d76cc9c6e56959704">BerkeleyEnvironment</a> ()</td></tr>
<tr class="memdesc:aec772ec512f6642d76cc9c6e56959704"><td class="mdescLeft">&#160;</td><td class="mdescRight">Construct an in-memory mock Berkeley environment for testing and as a place-holder for g_dbenvs emplace.  <a href="#aec772ec512f6642d76cc9c6e56959704">More...</a><br /></td></tr>
<tr class="separator:aec772ec512f6642d76cc9c6e56959704"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adab8b3d1eb8f5b399eca23519e9662d1"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/d42/classBerkeleyEnvironment.html#adab8b3d1eb8f5b399eca23519e9662d1">~BerkeleyEnvironment</a> ()</td></tr>
<tr class="separator:adab8b3d1eb8f5b399eca23519e9662d1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a825b4ec0595a609f84317453e2727211"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/d42/classBerkeleyEnvironment.html#a825b4ec0595a609f84317453e2727211">Reset</a> ()</td></tr>
<tr class="separator:a825b4ec0595a609f84317453e2727211"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2911294d38e8e0431cb5bde625879b61"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/d42/classBerkeleyEnvironment.html#a2911294d38e8e0431cb5bde625879b61">IsMock</a> () const</td></tr>
<tr class="separator:a2911294d38e8e0431cb5bde625879b61"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a088452212f7702c9af91b84640a767f7"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/d42/classBerkeleyEnvironment.html#a088452212f7702c9af91b84640a767f7">IsInitialized</a> () const</td></tr>
<tr class="separator:a088452212f7702c9af91b84640a767f7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acd2d77df760e915324ab7f4d5a339432"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/d42/classBerkeleyEnvironment.html#acd2d77df760e915324ab7f4d5a339432">IsDatabaseLoaded</a> (const std::string &amp;db_filename) const</td></tr>
<tr class="separator:acd2d77df760e915324ab7f4d5a339432"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1e5ad8ccd1e5e8ca57291bc2ec61613e"><td class="memItemLeft" align="right" valign="top">fs::path&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/d42/classBerkeleyEnvironment.html#a1e5ad8ccd1e5e8ca57291bc2ec61613e">Directory</a> () const</td></tr>
<tr class="separator:a1e5ad8ccd1e5e8ca57291bc2ec61613e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7ff8fa4ca71a32b5ee8ecaed23dd31f8"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d1/d42/classBerkeleyEnvironment.html#a898177d0cb22503c06cf8c40d70d6b56">VerifyResult</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/d42/classBerkeleyEnvironment.html#a7ff8fa4ca71a32b5ee8ecaed23dd31f8">Verify</a> (const std::string &amp;strFile, <a class="el" href="../../d1/d42/classBerkeleyEnvironment.html#a4097b6a84480eaf6c00be5d57789a114">recoverFunc_type</a> recoverFunc, std::string &amp;out_backup_filename)</td></tr>
<tr class="separator:a7ff8fa4ca71a32b5ee8ecaed23dd31f8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad46d4e55a431a0701e1a6e4d9f36590e"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/d42/classBerkeleyEnvironment.html#ad46d4e55a431a0701e1a6e4d9f36590e">Salvage</a> (const std::string &amp;strFile, bool fAggressive, std::vector&lt; <a class="el" href="../../d1/d42/classBerkeleyEnvironment.html#a80dc9ae666ddef68869bdbf97cd25000">KeyValPair</a> &gt; &amp;vResult)</td></tr>
<tr class="separator:ad46d4e55a431a0701e1a6e4d9f36590e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a377e27a4fe936bf73091c6b0560492fd"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/d42/classBerkeleyEnvironment.html#a377e27a4fe936bf73091c6b0560492fd">Open</a> (bool retry)</td></tr>
<tr class="separator:a377e27a4fe936bf73091c6b0560492fd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7cc70622c474660323b65b691d371023"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/d42/classBerkeleyEnvironment.html#a7cc70622c474660323b65b691d371023">Close</a> ()</td></tr>
<tr class="separator:a7cc70622c474660323b65b691d371023"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac889c4eb2edf8143204e3bbaeab61303"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/d42/classBerkeleyEnvironment.html#ac889c4eb2edf8143204e3bbaeab61303">Flush</a> (bool fShutdown)</td></tr>
<tr class="separator:ac889c4eb2edf8143204e3bbaeab61303"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac5eda28daa4264a1272e73814dac49c7"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/d42/classBerkeleyEnvironment.html#ac5eda28daa4264a1272e73814dac49c7">CheckpointLSN</a> (const std::string &amp;strFile)</td></tr>
<tr class="separator:ac5eda28daa4264a1272e73814dac49c7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af201da324fc94c4ada667ff2601647f6"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/d42/classBerkeleyEnvironment.html#af201da324fc94c4ada667ff2601647f6">CloseDb</a> (const std::string &amp;strFile)</td></tr>
<tr class="separator:af201da324fc94c4ada667ff2601647f6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2bb5277700853996eaaeb4d13b9b917b"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/d42/classBerkeleyEnvironment.html#a2bb5277700853996eaaeb4d13b9b917b">ReloadDbEnv</a> ()</td></tr>
<tr class="separator:a2bb5277700853996eaaeb4d13b9b917b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9cd3582d09828aedb10d8ac3c9065dad"><td class="memItemLeft" align="right" valign="top">DbTxn *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/d42/classBerkeleyEnvironment.html#a9cd3582d09828aedb10d8ac3c9065dad">TxnBegin</a> (int <a class="el" href="../../dc/ddf/bitcoin-tx_8cpp.html#ac8bf36fe0577cba66bccda3a6f7e80a4">flags</a>=DB_TXN_WRITE_NOSYNC)</td></tr>
<tr class="separator:a9cd3582d09828aedb10d8ac3c9065dad"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-attribs"></a>
Public Attributes</h2></td></tr>
<tr class="memitem:aa56eeed071b9d7c907fb8e51fd4e256c"><td class="memItemLeft" align="right" valign="top">std::unique_ptr&lt; DbEnv &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/d42/classBerkeleyEnvironment.html#aa56eeed071b9d7c907fb8e51fd4e256c">dbenv</a></td></tr>
<tr class="separator:aa56eeed071b9d7c907fb8e51fd4e256c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a25bbd1b8291ad5680896a21c380a7454"><td class="memItemLeft" align="right" valign="top">std::map&lt; std::string, int &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/d42/classBerkeleyEnvironment.html#a25bbd1b8291ad5680896a21c380a7454">mapFileUseCount</a></td></tr>
<tr class="separator:a25bbd1b8291ad5680896a21c380a7454"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3a1856006ee2578075e8301d48109c39"><td class="memItemLeft" align="right" valign="top">std::map&lt; std::string, std::reference_wrapper&lt; <a class="el" href="../../d7/d77/classBerkeleyDatabase.html">BerkeleyDatabase</a> &gt; &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/d42/classBerkeleyEnvironment.html#a3a1856006ee2578075e8301d48109c39">m_databases</a></td></tr>
<tr class="separator:a3a1856006ee2578075e8301d48109c39"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a032da605ef5d526f1626c9b4d66f0dd6"><td class="memItemLeft" align="right" valign="top">std::unordered_map&lt; std::string, <a class="el" href="../../de/dbc/structWalletDatabaseFileId.html">WalletDatabaseFileId</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/d42/classBerkeleyEnvironment.html#a032da605ef5d526f1626c9b4d66f0dd6">m_fileids</a></td></tr>
<tr class="separator:a032da605ef5d526f1626c9b4d66f0dd6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac021cd59bece125d5e3e0d9229d7a896"><td class="memItemLeft" align="right" valign="top">std::condition_variable_any&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/d42/classBerkeleyEnvironment.html#ac021cd59bece125d5e3e0d9229d7a896">m_db_in_use</a></td></tr>
<tr class="separator:ac021cd59bece125d5e3e0d9229d7a896"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pri-attribs"></a>
Private Attributes</h2></td></tr>
<tr class="memitem:a648dc2156e0d977f9441578b83c70171"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/d42/classBerkeleyEnvironment.html#a648dc2156e0d977f9441578b83c70171">fDbEnvInit</a></td></tr>
<tr class="separator:a648dc2156e0d977f9441578b83c70171"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae7040ce3db40ad58f6e830b5e074a413"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/d42/classBerkeleyEnvironment.html#ae7040ce3db40ad58f6e830b5e074a413">fMockDb</a></td></tr>
<tr class="separator:ae7040ce3db40ad58f6e830b5e074a413"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a911c5425903833df7a921cd076945990"><td class="memItemLeft" align="right" valign="top">std::string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/d42/classBerkeleyEnvironment.html#a911c5425903833df7a921cd076945990">strPath</a></td></tr>
<tr class="separator:a911c5425903833df7a921cd076945990"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Member Typedef Documentation</h2>
<a id="a80dc9ae666ddef68869bdbf97cd25000"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a80dc9ae666ddef68869bdbf97cd25000">&#9670;&nbsp;</a></span>KeyValPair</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef std::pair&lt;std::vector&lt;unsigned char&gt;, std::vector&lt;unsigned char&gt; &gt; <a class="el" href="../../d1/d42/classBerkeleyEnvironment.html#a80dc9ae666ddef68869bdbf97cd25000">BerkeleyEnvironment::KeyValPair</a></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Salvage data from a file that Verify says is bad. fAggressive sets the DB_AGGRESSIVE flag (see berkeley DB-&gt;<a class="el" href="../../d7/de0/namespacegitian-build.html#aaa4660d75cb260b33198890a2edab306">verify()</a> method documentation). Appends binary key/value pairs to vResult, returns true if successful. NOTE: reads the entire database into memory, so cannot be used for huge databases. </p>

</div>
</div>
<a id="a4097b6a84480eaf6c00be5d57789a114"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4097b6a84480eaf6c00be5d57789a114">&#9670;&nbsp;</a></span>recoverFunc_type</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef bool(* BerkeleyEnvironment::recoverFunc_type) (const fs::path &amp;file_path, std::string &amp;out_backup_filename)</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<h2 class="groupheader">Member Enumeration Documentation</h2>
<a id="a898177d0cb22503c06cf8c40d70d6b56"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a898177d0cb22503c06cf8c40d70d6b56">&#9670;&nbsp;</a></span>VerifyResult</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="../../d1/d42/classBerkeleyEnvironment.html#a898177d0cb22503c06cf8c40d70d6b56">BerkeleyEnvironment::VerifyResult</a></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">strong</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Verify that database file strFile is OK. If it is not, call the callback to try to recover. This must be called BEFORE strFile is opened. Returns true if strFile is OK. </p>
<table class="fieldtable">
<tr><th colspan="2">Enumerator</th></tr><tr><td class="fieldname"><a id="a898177d0cb22503c06cf8c40d70d6b56a472351361a4f0778fe872c265e811907"></a>VERIFY_OK&#160;</td><td class="fielddoc"></td></tr>
<tr><td class="fieldname"><a id="a898177d0cb22503c06cf8c40d70d6b56ab4c78330ee9f64bd5c4b30ca8dec8296"></a>RECOVER_OK&#160;</td><td class="fielddoc"></td></tr>
<tr><td class="fieldname"><a id="a898177d0cb22503c06cf8c40d70d6b56a11421d83e9f4dea33178d275bcc4f0c0"></a>RECOVER_FAIL&#160;</td><td class="fielddoc"></td></tr>
</table>

</div>
</div>
<h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a id="a62bf19db5dc92ca7db4c454d44a4dd2c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a62bf19db5dc92ca7db4c454d44a4dd2c">&#9670;&nbsp;</a></span>BerkeleyEnvironment() <span class="overload">[1/2]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">BerkeleyEnvironment::BerkeleyEnvironment </td>
          <td>(</td>
          <td class="paramtype">const fs::path &amp;&#160;</td>
          <td class="paramname"><em>env_directory</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="aec772ec512f6642d76cc9c6e56959704"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aec772ec512f6642d76cc9c6e56959704">&#9670;&nbsp;</a></span>BerkeleyEnvironment() <span class="overload">[2/2]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">BerkeleyEnvironment::BerkeleyEnvironment </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Construct an in-memory mock Berkeley environment for testing and as a place-holder for g_dbenvs emplace. </p>

</div>
</div>
<a id="adab8b3d1eb8f5b399eca23519e9662d1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#adab8b3d1eb8f5b399eca23519e9662d1">&#9670;&nbsp;</a></span>~BerkeleyEnvironment()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">BerkeleyEnvironment::~BerkeleyEnvironment </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a id="ac5eda28daa4264a1272e73814dac49c7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac5eda28daa4264a1272e73814dac49c7">&#9670;&nbsp;</a></span>CheckpointLSN()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void BerkeleyEnvironment::CheckpointLSN </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>strFile</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="a7cc70622c474660323b65b691d371023"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7cc70622c474660323b65b691d371023">&#9670;&nbsp;</a></span>Close()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void BerkeleyEnvironment::Close </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="af201da324fc94c4ada667ff2601647f6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af201da324fc94c4ada667ff2601647f6">&#9670;&nbsp;</a></span>CloseDb()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void BerkeleyEnvironment::CloseDb </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>strFile</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="a1e5ad8ccd1e5e8ca57291bc2ec61613e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1e5ad8ccd1e5e8ca57291bc2ec61613e">&#9670;&nbsp;</a></span>Directory()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">fs::path BerkeleyEnvironment::Directory </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="ac889c4eb2edf8143204e3bbaeab61303"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac889c4eb2edf8143204e3bbaeab61303">&#9670;&nbsp;</a></span>Flush()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void BerkeleyEnvironment::Flush </td>
          <td>(</td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>fShutdown</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="acd2d77df760e915324ab7f4d5a339432"></a>
<h2 class="memtitle"><span class="permalink"><a href="#acd2d77df760e915324ab7f4d5a339432">&#9670;&nbsp;</a></span>IsDatabaseLoaded()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool BerkeleyEnvironment::IsDatabaseLoaded </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>db_filename</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="a088452212f7702c9af91b84640a767f7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a088452212f7702c9af91b84640a767f7">&#9670;&nbsp;</a></span>IsInitialized()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool BerkeleyEnvironment::IsInitialized </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="a2911294d38e8e0431cb5bde625879b61"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2911294d38e8e0431cb5bde625879b61">&#9670;&nbsp;</a></span>IsMock()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool BerkeleyEnvironment::IsMock </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="a377e27a4fe936bf73091c6b0560492fd"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a377e27a4fe936bf73091c6b0560492fd">&#9670;&nbsp;</a></span>Open()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool BerkeleyEnvironment::Open </td>
          <td>(</td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>retry</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>debug </p>

</div>
</div>
<a id="a2bb5277700853996eaaeb4d13b9b917b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2bb5277700853996eaaeb4d13b9b917b">&#9670;&nbsp;</a></span>ReloadDbEnv()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void BerkeleyEnvironment::ReloadDbEnv </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="a825b4ec0595a609f84317453e2727211"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a825b4ec0595a609f84317453e2727211">&#9670;&nbsp;</a></span>Reset()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void BerkeleyEnvironment::Reset </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="ad46d4e55a431a0701e1a6e4d9f36590e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad46d4e55a431a0701e1a6e4d9f36590e">&#9670;&nbsp;</a></span>Salvage()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool BerkeleyEnvironment::Salvage </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>strFile</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>fAggressive</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::vector&lt; <a class="el" href="../../d1/d42/classBerkeleyEnvironment.html#a80dc9ae666ddef68869bdbf97cd25000">KeyValPair</a> &gt; &amp;&#160;</td>
          <td class="paramname"><em>vResult</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="a9cd3582d09828aedb10d8ac3c9065dad"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9cd3582d09828aedb10d8ac3c9065dad">&#9670;&nbsp;</a></span>TxnBegin()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">DbTxn* BerkeleyEnvironment::TxnBegin </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>flags</em> = <code>DB_TXN_WRITE_NOSYNC</code></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="a7ff8fa4ca71a32b5ee8ecaed23dd31f8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7ff8fa4ca71a32b5ee8ecaed23dd31f8">&#9670;&nbsp;</a></span>Verify()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d1/d42/classBerkeleyEnvironment.html#a898177d0cb22503c06cf8c40d70d6b56">BerkeleyEnvironment::VerifyResult</a> BerkeleyEnvironment::Verify </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>strFile</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d1/d42/classBerkeleyEnvironment.html#a4097b6a84480eaf6c00be5d57789a114">recoverFunc_type</a>&#160;</td>
          <td class="paramname"><em>recoverFunc</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::string &amp;&#160;</td>
          <td class="paramname"><em>out_backup_filename</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<h2 class="groupheader">Member Data Documentation</h2>
<a id="aa56eeed071b9d7c907fb8e51fd4e256c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa56eeed071b9d7c907fb8e51fd4e256c">&#9670;&nbsp;</a></span>dbenv</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::unique_ptr&lt;DbEnv&gt; BerkeleyEnvironment::dbenv</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="a648dc2156e0d977f9441578b83c70171"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a648dc2156e0d977f9441578b83c70171">&#9670;&nbsp;</a></span>fDbEnvInit</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool BerkeleyEnvironment::fDbEnvInit</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="ae7040ce3db40ad58f6e830b5e074a413"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae7040ce3db40ad58f6e830b5e074a413">&#9670;&nbsp;</a></span>fMockDb</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool BerkeleyEnvironment::fMockDb</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="a3a1856006ee2578075e8301d48109c39"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3a1856006ee2578075e8301d48109c39">&#9670;&nbsp;</a></span>m_databases</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::map&lt;std::string, std::reference_wrapper&lt;<a class="el" href="../../d7/d77/classBerkeleyDatabase.html">BerkeleyDatabase</a>&gt; &gt; BerkeleyEnvironment::m_databases</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="ac021cd59bece125d5e3e0d9229d7a896"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac021cd59bece125d5e3e0d9229d7a896">&#9670;&nbsp;</a></span>m_db_in_use</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::condition_variable_any BerkeleyEnvironment::m_db_in_use</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="a032da605ef5d526f1626c9b4d66f0dd6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a032da605ef5d526f1626c9b4d66f0dd6">&#9670;&nbsp;</a></span>m_fileids</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::unordered_map&lt;std::string, <a class="el" href="../../de/dbc/structWalletDatabaseFileId.html">WalletDatabaseFileId</a>&gt; BerkeleyEnvironment::m_fileids</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="a25bbd1b8291ad5680896a21c380a7454"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a25bbd1b8291ad5680896a21c380a7454">&#9670;&nbsp;</a></span>mapFileUseCount</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::map&lt;std::string, int&gt; BerkeleyEnvironment::mapFileUseCount</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="a911c5425903833df7a921cd076945990"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a911c5425903833df7a921cd076945990">&#9670;&nbsp;</a></span>strPath</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::string BerkeleyEnvironment::strPath</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li>src/wallet/<a class="el" href="../../da/d7e/wallet_2db_8h_source.html">db.h</a></li>
<li>src/wallet/<a class="el" href="../../df/d4e/db_8cpp.html">db.cpp</a></li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="../../doxygen.png" alt="doxygen"/>
</a> 1.8.15
</small></address>
</body>
</html>
