<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.15"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Bitcoin: interfaces::Chain::Lock Class Reference</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/searchdata.js"></script>
<script type="text/javascript" src="../../search/search.js"></script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Bitcoin
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.15 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "../../search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="../../menudata.js"></script>
<script type="text/javascript" src="../../menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('../../',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="../../d6/d55/namespaceinterfaces.html">interfaces</a></li><li class="navelem"><a class="el" href="../../df/d87/classinterfaces_1_1Chain.html">Chain</a></li><li class="navelem"><a class="el" href="../../d8/d66/classinterfaces_1_1Chain_1_1Lock.html">Lock</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="../../d4/d78/classinterfaces_1_1Chain_1_1Lock-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">interfaces::Chain::Lock Class Reference<span class="mlabels"><span class="mlabel">abstract</span></span></div>  </div>
</div><!--header-->
<div class="contents">

<p><code>#include &lt;<a class="el" href="../../d8/d76/interfaces_2chain_8h_source.html">chain.h</a>&gt;</code></p>
<div class="dynheader">
Inheritance diagram for interfaces::Chain::Lock:</div>
<div class="dyncontent">
 <div class="center">
  <img src="../../d8/d66/classinterfaces_1_1Chain_1_1Lock.png" usemap="#interfaces::Chain::Lock_map" alt=""/>
  <map id="interfaces::Chain::Lock_map" name="interfaces::Chain::Lock_map">
<area href="../../df/da7/classinterfaces_1_1anonymous__namespace_02chain_8cpp_03_1_1LockImpl.html" alt="interfaces::anonymous_namespace{chain.cpp}::LockImpl" shape="rect" coords="0,56,328,80"/>
  </map>
</div></div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:aba03076266625fffec4225131fae1746"><td class="memItemLeft" align="right" valign="top">virtual&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/d66/classinterfaces_1_1Chain_1_1Lock.html#aba03076266625fffec4225131fae1746">~Lock</a> ()</td></tr>
<tr class="separator:aba03076266625fffec4225131fae1746"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acd6970b05caec9c0f257355413ab9c5d"><td class="memItemLeft" align="right" valign="top">virtual <a class="el" href="../../dc/d62/optional_8h.html#ad2d809b9d71f39717698ac42fe339257">Optional</a>&lt; int &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/d66/classinterfaces_1_1Chain_1_1Lock.html#acd6970b05caec9c0f257355413ab9c5d">getHeight</a> ()=0</td></tr>
<tr class="separator:acd6970b05caec9c0f257355413ab9c5d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af6735230c0e9c82305a9d59e04ac666e"><td class="memItemLeft" align="right" valign="top">virtual <a class="el" href="../../dc/d62/optional_8h.html#ad2d809b9d71f39717698ac42fe339257">Optional</a>&lt; int &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/d66/classinterfaces_1_1Chain_1_1Lock.html#af6735230c0e9c82305a9d59e04ac666e">getBlockHeight</a> (const <a class="el" href="../../d2/d86/classuint256.html">uint256</a> &amp;hash)=0</td></tr>
<tr class="separator:af6735230c0e9c82305a9d59e04ac666e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a151dbafe7a2b47de7749829909b4d72e"><td class="memItemLeft" align="right" valign="top">virtual int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/d66/classinterfaces_1_1Chain_1_1Lock.html#a151dbafe7a2b47de7749829909b4d72e">getBlockDepth</a> (const <a class="el" href="../../d2/d86/classuint256.html">uint256</a> &amp;hash)=0</td></tr>
<tr class="separator:a151dbafe7a2b47de7749829909b4d72e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abf8260c51bd24dee60ef69441a4c7061"><td class="memItemLeft" align="right" valign="top">virtual <a class="el" href="../../d2/d86/classuint256.html">uint256</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/d66/classinterfaces_1_1Chain_1_1Lock.html#abf8260c51bd24dee60ef69441a4c7061">getBlockHash</a> (int height)=0</td></tr>
<tr class="memdesc:abf8260c51bd24dee60ef69441a4c7061"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get block hash. Height must be valid or this function will abort.  <a href="#abf8260c51bd24dee60ef69441a4c7061">More...</a><br /></td></tr>
<tr class="separator:abf8260c51bd24dee60ef69441a4c7061"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a70f3cae68f585292dbff5d94fb910c88"><td class="memItemLeft" align="right" valign="top">virtual <a class="el" href="../../df/dd8/stdint_8h.html#adec1df1b8b51cb32b77e5b86fff46471">int64_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/d66/classinterfaces_1_1Chain_1_1Lock.html#a70f3cae68f585292dbff5d94fb910c88">getBlockTime</a> (int height)=0</td></tr>
<tr class="memdesc:a70f3cae68f585292dbff5d94fb910c88"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get block time. Height must be valid or this function will abort.  <a href="#a70f3cae68f585292dbff5d94fb910c88">More...</a><br /></td></tr>
<tr class="separator:a70f3cae68f585292dbff5d94fb910c88"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad1e1c91bb42592ac567f61c5c82bbd0d"><td class="memItemLeft" align="right" valign="top">virtual <a class="el" href="../../df/dd8/stdint_8h.html#adec1df1b8b51cb32b77e5b86fff46471">int64_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/d66/classinterfaces_1_1Chain_1_1Lock.html#ad1e1c91bb42592ac567f61c5c82bbd0d">getBlockMedianTimePast</a> (int height)=0</td></tr>
<tr class="separator:ad1e1c91bb42592ac567f61c5c82bbd0d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aaf0c0c0053b38e2b0d80e93bae1a6a8e"><td class="memItemLeft" align="right" valign="top">virtual bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/d66/classinterfaces_1_1Chain_1_1Lock.html#aaf0c0c0053b38e2b0d80e93bae1a6a8e">haveBlockOnDisk</a> (int height)=0</td></tr>
<tr class="separator:aaf0c0c0053b38e2b0d80e93bae1a6a8e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1311bfd4f2dca4903185b3f3e0d3006a"><td class="memItemLeft" align="right" valign="top">virtual <a class="el" href="../../dc/d62/optional_8h.html#ad2d809b9d71f39717698ac42fe339257">Optional</a>&lt; int &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/d66/classinterfaces_1_1Chain_1_1Lock.html#a1311bfd4f2dca4903185b3f3e0d3006a">findFirstBlockWithTimeAndHeight</a> (<a class="el" href="../../df/dd8/stdint_8h.html#adec1df1b8b51cb32b77e5b86fff46471">int64_t</a> time, int height, <a class="el" href="../../d2/d86/classuint256.html">uint256</a> *hash)=0</td></tr>
<tr class="separator:a1311bfd4f2dca4903185b3f3e0d3006a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acce7b2ac050252e9aa47025fff70cf0b"><td class="memItemLeft" align="right" valign="top">virtual <a class="el" href="../../dc/d62/optional_8h.html#ad2d809b9d71f39717698ac42fe339257">Optional</a>&lt; int &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/d66/classinterfaces_1_1Chain_1_1Lock.html#acce7b2ac050252e9aa47025fff70cf0b">findPruned</a> (int start_height=0, <a class="el" href="../../dc/d62/optional_8h.html#ad2d809b9d71f39717698ac42fe339257">Optional</a>&lt; int &gt; stop_height=<a class="el" href="../../dc/d62/optional_8h.html#ad24c4f329705cf403dc8f7fe1f50e7d5">nullopt</a>)=0</td></tr>
<tr class="separator:acce7b2ac050252e9aa47025fff70cf0b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0fde9fb0229d2dda8247e2f3f525f2a0"><td class="memItemLeft" align="right" valign="top">virtual <a class="el" href="../../dc/d62/optional_8h.html#ad2d809b9d71f39717698ac42fe339257">Optional</a>&lt; int &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/d66/classinterfaces_1_1Chain_1_1Lock.html#a0fde9fb0229d2dda8247e2f3f525f2a0">findFork</a> (const <a class="el" href="../../d2/d86/classuint256.html">uint256</a> &amp;hash, <a class="el" href="../../dc/d62/optional_8h.html#ad2d809b9d71f39717698ac42fe339257">Optional</a>&lt; int &gt; *height)=0</td></tr>
<tr class="separator:a0fde9fb0229d2dda8247e2f3f525f2a0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad13de67a1e984f413e0b5f8ad9b993b6"><td class="memItemLeft" align="right" valign="top">virtual <a class="el" href="../../d6/d41/structCBlockLocator.html">CBlockLocator</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/d66/classinterfaces_1_1Chain_1_1Lock.html#ad13de67a1e984f413e0b5f8ad9b993b6">getTipLocator</a> ()=0</td></tr>
<tr class="memdesc:ad13de67a1e984f413e0b5f8ad9b993b6"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get locator for the current chain tip.  <a href="#ad13de67a1e984f413e0b5f8ad9b993b6">More...</a><br /></td></tr>
<tr class="separator:ad13de67a1e984f413e0b5f8ad9b993b6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae29af2aec694b4c5408ddc25a37b682a"><td class="memItemLeft" align="right" valign="top">virtual <a class="el" href="../../dc/d62/optional_8h.html#ad2d809b9d71f39717698ac42fe339257">Optional</a>&lt; int &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/d66/classinterfaces_1_1Chain_1_1Lock.html#ae29af2aec694b4c5408ddc25a37b682a">findLocatorFork</a> (const <a class="el" href="../../d6/d41/structCBlockLocator.html">CBlockLocator</a> &amp;locator)=0</td></tr>
<tr class="separator:ae29af2aec694b4c5408ddc25a37b682a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a27bb48764b1292e32915a99d680787fd"><td class="memItemLeft" align="right" valign="top">virtual bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/d66/classinterfaces_1_1Chain_1_1Lock.html#a27bb48764b1292e32915a99d680787fd">checkFinalTx</a> (const <a class="el" href="../../d8/dbe/classCTransaction.html">CTransaction</a> &amp;tx)=0</td></tr>
<tr class="memdesc:a27bb48764b1292e32915a99d680787fd"><td class="mdescLeft">&#160;</td><td class="mdescRight">Check if transaction will be final given chain height current time.  <a href="#a27bb48764b1292e32915a99d680787fd">More...</a><br /></td></tr>
<tr class="separator:a27bb48764b1292e32915a99d680787fd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8731903b56020a42b51a863d4e1d39c5"><td class="memItemLeft" align="right" valign="top">virtual bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/d66/classinterfaces_1_1Chain_1_1Lock.html#a8731903b56020a42b51a863d4e1d39c5">submitToMemoryPool</a> (const <a class="el" href="../../dc/d1c/primitives_2transaction_8h.html#ae462b4b8f07705a82bf11cf361959b97">CTransactionRef</a> &amp;tx, <a class="el" href="../../dd/d2f/amount_8h.html#a4eaf3a5239714d8c45b851527f7cb564">CAmount</a> absurd_fee, <a class="el" href="../../d4/d71/classCValidationState.html">CValidationState</a> &amp;state)=0</td></tr>
<tr class="separator:a8731903b56020a42b51a863d4e1d39c5"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Interface for querying locked chain state, used by legacy code that assumes state won't change between calls. New code should avoid using the <a class="el" href="../../d8/d66/classinterfaces_1_1Chain_1_1Lock.html">Lock</a> interface and instead call higher-level <a class="el" href="../../df/d87/classinterfaces_1_1Chain.html">Chain</a> methods that return more information so the chain doesn't need to stay locked between calls. </p>
</div><h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a id="aba03076266625fffec4225131fae1746"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aba03076266625fffec4225131fae1746">&#9670;&nbsp;</a></span>~Lock()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">virtual interfaces::Chain::Lock::~Lock </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a id="a27bb48764b1292e32915a99d680787fd"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a27bb48764b1292e32915a99d680787fd">&#9670;&nbsp;</a></span>checkFinalTx()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">virtual bool interfaces::Chain::Lock::checkFinalTx </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="../../d8/dbe/classCTransaction.html">CTransaction</a> &amp;&#160;</td>
          <td class="paramname"><em>tx</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">pure virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Check if transaction will be final given chain height current time. </p>

<p>Implemented in <a class="el" href="../../df/da7/classinterfaces_1_1anonymous__namespace_02chain_8cpp_03_1_1LockImpl.html#a7ee689d678d128529ab1249e198b61b7">interfaces::anonymous_namespace{chain.cpp}::LockImpl</a>.</p>

</div>
</div>
<a id="a1311bfd4f2dca4903185b3f3e0d3006a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1311bfd4f2dca4903185b3f3e0d3006a">&#9670;&nbsp;</a></span>findFirstBlockWithTimeAndHeight()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">virtual <a class="el" href="../../dc/d62/optional_8h.html#ad2d809b9d71f39717698ac42fe339257">Optional</a>&lt;int&gt; interfaces::Chain::Lock::findFirstBlockWithTimeAndHeight </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../df/dd8/stdint_8h.html#adec1df1b8b51cb32b77e5b86fff46471">int64_t</a>&#160;</td>
          <td class="paramname"><em>time</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>height</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d2/d86/classuint256.html">uint256</a> *&#160;</td>
          <td class="paramname"><em>hash</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">pure virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Return height of the first block in the chain with timestamp equal or greater than the given time and height equal or greater than the given height, or nullopt if there is no block with a high enough timestamp and height. Also return the block hash as an optional output parameter (to avoid the cost of a second lookup in case this information is needed.) </p>

<p>Implemented in <a class="el" href="../../df/da7/classinterfaces_1_1anonymous__namespace_02chain_8cpp_03_1_1LockImpl.html#a3f249becd0a3ba9176695e54088b7dd6">interfaces::anonymous_namespace{chain.cpp}::LockImpl</a>.</p>

</div>
</div>
<a id="a0fde9fb0229d2dda8247e2f3f525f2a0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0fde9fb0229d2dda8247e2f3f525f2a0">&#9670;&nbsp;</a></span>findFork()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">virtual <a class="el" href="../../dc/d62/optional_8h.html#ad2d809b9d71f39717698ac42fe339257">Optional</a>&lt;int&gt; interfaces::Chain::Lock::findFork </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="../../d2/d86/classuint256.html">uint256</a> &amp;&#160;</td>
          <td class="paramname"><em>hash</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../dc/d62/optional_8h.html#ad2d809b9d71f39717698ac42fe339257">Optional</a>&lt; int &gt; *&#160;</td>
          <td class="paramname"><em>height</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">pure virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Return height of the specified block if it is on the chain, otherwise return the height of the highest block on chain that's an ancestor of the specified block, or nullopt if there is no common ancestor. Also return the height of the specified block as an optional output parameter (to avoid the cost of a second hash lookup in case this information is desired). </p>

<p>Implemented in <a class="el" href="../../df/da7/classinterfaces_1_1anonymous__namespace_02chain_8cpp_03_1_1LockImpl.html#a3f8d800b84e803a6050f2d5ea9c9ff9e">interfaces::anonymous_namespace{chain.cpp}::LockImpl</a>.</p>

</div>
</div>
<a id="ae29af2aec694b4c5408ddc25a37b682a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae29af2aec694b4c5408ddc25a37b682a">&#9670;&nbsp;</a></span>findLocatorFork()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">virtual <a class="el" href="../../dc/d62/optional_8h.html#ad2d809b9d71f39717698ac42fe339257">Optional</a>&lt;int&gt; interfaces::Chain::Lock::findLocatorFork </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="../../d6/d41/structCBlockLocator.html">CBlockLocator</a> &amp;&#160;</td>
          <td class="paramname"><em>locator</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">pure virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Return height of the highest block on chain in common with the locator, which will either be the original block used to create the locator, or one of its ancestors. </p>

<p>Implemented in <a class="el" href="../../df/da7/classinterfaces_1_1anonymous__namespace_02chain_8cpp_03_1_1LockImpl.html#ab17a999985b0dd515c4e44fc7fd464fb">interfaces::anonymous_namespace{chain.cpp}::LockImpl</a>.</p>

</div>
</div>
<a id="acce7b2ac050252e9aa47025fff70cf0b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#acce7b2ac050252e9aa47025fff70cf0b">&#9670;&nbsp;</a></span>findPruned()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">virtual <a class="el" href="../../dc/d62/optional_8h.html#ad2d809b9d71f39717698ac42fe339257">Optional</a>&lt;int&gt; interfaces::Chain::Lock::findPruned </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>start_height</em> = <code>0</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../dc/d62/optional_8h.html#ad2d809b9d71f39717698ac42fe339257">Optional</a>&lt; int &gt;&#160;</td>
          <td class="paramname"><em>stop_height</em> = <code><a class="el" href="../../dc/d62/optional_8h.html#ad24c4f329705cf403dc8f7fe1f50e7d5">nullopt</a></code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">pure virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Return height of last block in the specified range which is pruned, or nullopt if no block in the range is pruned. Range is inclusive. </p>

<p>Implemented in <a class="el" href="../../df/da7/classinterfaces_1_1anonymous__namespace_02chain_8cpp_03_1_1LockImpl.html#a40cb2f3782a04826e3dc20ff67bcc6e9">interfaces::anonymous_namespace{chain.cpp}::LockImpl</a>.</p>

</div>
</div>
<a id="a151dbafe7a2b47de7749829909b4d72e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a151dbafe7a2b47de7749829909b4d72e">&#9670;&nbsp;</a></span>getBlockDepth()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">virtual int interfaces::Chain::Lock::getBlockDepth </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="../../d2/d86/classuint256.html">uint256</a> &amp;&#160;</td>
          <td class="paramname"><em>hash</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">pure virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Get block depth. Returns 1 for chain tip, 2 for preceding block, and so on. Returns 0 for a block not included in the current chain. </p>

<p>Implemented in <a class="el" href="../../df/da7/classinterfaces_1_1anonymous__namespace_02chain_8cpp_03_1_1LockImpl.html#ad73147101202e00ec362c53f7b43a725">interfaces::anonymous_namespace{chain.cpp}::LockImpl</a>.</p>

</div>
</div>
<a id="abf8260c51bd24dee60ef69441a4c7061"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abf8260c51bd24dee60ef69441a4c7061">&#9670;&nbsp;</a></span>getBlockHash()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">virtual <a class="el" href="../../d2/d86/classuint256.html">uint256</a> interfaces::Chain::Lock::getBlockHash </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>height</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">pure virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Get block hash. Height must be valid or this function will abort. </p>

<p>Implemented in <a class="el" href="../../df/da7/classinterfaces_1_1anonymous__namespace_02chain_8cpp_03_1_1LockImpl.html#ad51eac66521dc44bae2af17968fdf889">interfaces::anonymous_namespace{chain.cpp}::LockImpl</a>.</p>

</div>
</div>
<a id="af6735230c0e9c82305a9d59e04ac666e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af6735230c0e9c82305a9d59e04ac666e">&#9670;&nbsp;</a></span>getBlockHeight()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">virtual <a class="el" href="../../dc/d62/optional_8h.html#ad2d809b9d71f39717698ac42fe339257">Optional</a>&lt;int&gt; interfaces::Chain::Lock::getBlockHeight </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="../../d2/d86/classuint256.html">uint256</a> &amp;&#160;</td>
          <td class="paramname"><em>hash</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">pure virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Get block height above genesis block. Returns 0 for genesis block, 1 for following block, and so on. Returns nullopt for a block not included in the current chain. </p>

<p>Implemented in <a class="el" href="../../df/da7/classinterfaces_1_1anonymous__namespace_02chain_8cpp_03_1_1LockImpl.html#a7c57c5a4d95dc3f7dd57879e325fddcf">interfaces::anonymous_namespace{chain.cpp}::LockImpl</a>.</p>

</div>
</div>
<a id="ad1e1c91bb42592ac567f61c5c82bbd0d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad1e1c91bb42592ac567f61c5c82bbd0d">&#9670;&nbsp;</a></span>getBlockMedianTimePast()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">virtual <a class="el" href="../../df/dd8/stdint_8h.html#adec1df1b8b51cb32b77e5b86fff46471">int64_t</a> interfaces::Chain::Lock::getBlockMedianTimePast </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>height</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">pure virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Get block median time past. Height must be valid or this function will abort. </p>

<p>Implemented in <a class="el" href="../../df/da7/classinterfaces_1_1anonymous__namespace_02chain_8cpp_03_1_1LockImpl.html#a857fb549dbd169e10c0e3f8db863b455">interfaces::anonymous_namespace{chain.cpp}::LockImpl</a>.</p>

</div>
</div>
<a id="a70f3cae68f585292dbff5d94fb910c88"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a70f3cae68f585292dbff5d94fb910c88">&#9670;&nbsp;</a></span>getBlockTime()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">virtual <a class="el" href="../../df/dd8/stdint_8h.html#adec1df1b8b51cb32b77e5b86fff46471">int64_t</a> interfaces::Chain::Lock::getBlockTime </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>height</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">pure virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Get block time. Height must be valid or this function will abort. </p>

<p>Implemented in <a class="el" href="../../df/da7/classinterfaces_1_1anonymous__namespace_02chain_8cpp_03_1_1LockImpl.html#ac5c537421025ecf9577a7e4f93ffae26">interfaces::anonymous_namespace{chain.cpp}::LockImpl</a>.</p>

</div>
</div>
<a id="acd6970b05caec9c0f257355413ab9c5d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#acd6970b05caec9c0f257355413ab9c5d">&#9670;&nbsp;</a></span>getHeight()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">virtual <a class="el" href="../../dc/d62/optional_8h.html#ad2d809b9d71f39717698ac42fe339257">Optional</a>&lt;int&gt; interfaces::Chain::Lock::getHeight </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">pure virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Get current chain height, not including genesis block (returns 0 if chain only contains genesis block, nullopt if chain does not contain any blocks). </p>

<p>Implemented in <a class="el" href="../../df/da7/classinterfaces_1_1anonymous__namespace_02chain_8cpp_03_1_1LockImpl.html#ab85805768ab6656e7e8e76428210bf12">interfaces::anonymous_namespace{chain.cpp}::LockImpl</a>.</p>

</div>
</div>
<a id="ad13de67a1e984f413e0b5f8ad9b993b6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad13de67a1e984f413e0b5f8ad9b993b6">&#9670;&nbsp;</a></span>getTipLocator()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">virtual <a class="el" href="../../d6/d41/structCBlockLocator.html">CBlockLocator</a> interfaces::Chain::Lock::getTipLocator </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">pure virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Get locator for the current chain tip. </p>

<p>Implemented in <a class="el" href="../../df/da7/classinterfaces_1_1anonymous__namespace_02chain_8cpp_03_1_1LockImpl.html#ae89bee0a38a6550db918597f53997e2c">interfaces::anonymous_namespace{chain.cpp}::LockImpl</a>.</p>

</div>
</div>
<a id="aaf0c0c0053b38e2b0d80e93bae1a6a8e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aaf0c0c0053b38e2b0d80e93bae1a6a8e">&#9670;&nbsp;</a></span>haveBlockOnDisk()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">virtual bool interfaces::Chain::Lock::haveBlockOnDisk </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>height</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">pure virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Check that the block is available on disk (i.e. has not been pruned), and contains transactions. </p>

<p>Implemented in <a class="el" href="../../df/da7/classinterfaces_1_1anonymous__namespace_02chain_8cpp_03_1_1LockImpl.html#a9f6efd463390bc55aa1d4d31bfb74ef0">interfaces::anonymous_namespace{chain.cpp}::LockImpl</a>.</p>

</div>
</div>
<a id="a8731903b56020a42b51a863d4e1d39c5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8731903b56020a42b51a863d4e1d39c5">&#9670;&nbsp;</a></span>submitToMemoryPool()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">virtual bool interfaces::Chain::Lock::submitToMemoryPool </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="../../dc/d1c/primitives_2transaction_8h.html#ae462b4b8f07705a82bf11cf361959b97">CTransactionRef</a> &amp;&#160;</td>
          <td class="paramname"><em>tx</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../dd/d2f/amount_8h.html#a4eaf3a5239714d8c45b851527f7cb564">CAmount</a>&#160;</td>
          <td class="paramname"><em>absurd_fee</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d4/d71/classCValidationState.html">CValidationState</a> &amp;&#160;</td>
          <td class="paramname"><em>state</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">pure virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Add transaction to memory pool if the transaction fee is below the amount specified by absurd_fee. Returns false if the transaction could not be added due to the fee or for another reason. </p>

<p>Implemented in <a class="el" href="../../df/da7/classinterfaces_1_1anonymous__namespace_02chain_8cpp_03_1_1LockImpl.html#a499ee40e35fb7bb8cc5bf5da45560194">interfaces::anonymous_namespace{chain.cpp}::LockImpl</a>.</p>

</div>
</div>
<hr/>The documentation for this class was generated from the following file:<ul>
<li>src/interfaces/<a class="el" href="../../d8/d76/interfaces_2chain_8h_source.html">chain.h</a></li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="../../doxygen.png" alt="doxygen"/>
</a> 1.8.15
</small></address>
</body>
</html>
